{% extends 'account/dashboard_base.html' %}
{% load staticfiles %}
{% load producttags %}

{% block dashboard_css %}
    <link rel="stylesheet" href="{% static 'css/dashboard/report.css' %}">
{% endblock %}

{% block dashboard_js %}
    <script type="text/javascript" src="{% static 'js/seller/order.js' %}"></script>
    <script type="text/javascript">
        $('.report_detail_button').on('click', function () {
            if($(this).attr('aria-hidden')=='true'){
                $(this).parent().parent().next().show();
                $(this).attr('aria-hidden', 'false');
            }else{
                $(this).parent().parent().next().hide();
                $(this).attr('aria-hidden', 'true');
            }
        });
    </script>
{% endblock %}

{% block dashboard_content %}
    <div class="dashboard-content">
        <div class="dashboard-nav">
            1:1 문의
        </div>
        <div class="report-nav">
            <ul>
                <li><a href="{% url 'report' %}">신고하기</a></li>
                <li class="active"><a href="{% url 'report_history' %}">신고한 내역</a></li>
                <li><a href="{% url 'report_received' %}">신고받은 내역</a></li>
            </ul>
        </div>
        <div class="dashboard-report">
            <div class="meta">
                <p>고객님의 원활한 소셜업 사용에 불편을 주는 셀러가 있다면 이야기해주세요</p>
            </div>
        </div>
        <div>
            {% if reports %}
                {% for report in reports %}
                    <div class="report_each_wrapper overview">
                        <div class="report_each_left">
                            <img id="user" src="{{ report.writer.get_avatar }}">
                        </div>
                        <div class="report_each_mid overview">
                            <div class="report_each_type overview">{{ report.id }}. {{ report.type_in_korean }}</div>
                            <div class="report_each_detail">{{ report.created|date:"Y.m.d" }}</div>
                        </div>
                        <div class="report_each_right">
                            <div class="report_status_user_wrapper"">
                                <div style="text-align: right">{{ report.writer.get_short_name }}</div>
                                {% if report.status == 'completed' %}
                                    <div class="report_status_box">처리완료</div>
                                {% else %}
                                    <div class="report_status_box">처리중</div>
                                {% endif %}
                            </div>
                            <img class="report_detail_button" src="{% static 'img/report_arrow.png' %}" aria-hidden="true">
                        </div>
                    </div>
                    <div class="report_detail_wrapper">
                        <div class="report_each_wrapper detail">
                            <div class="report_each_left">
                                <img id="user" src="{{ report.writer.get_avatar }}">
                            </div>
                            <div class="report_each_mid">
                                <div class="report_each_type">{{ report.type_in_korean }}</div>
                                <div class="report_each_detail">{{ report.detail}}</div>
                            </div>
                        </div>
                        {% if report.reply %}
                            <div class="report_each_wrapper reply">
                                <div class="report_each_left">
                                    <img id="user" src="{{ 1|cs_admin_user_avatar }}">
                                </div>
                                <div class="report_each_mid">
                                    <div class="report_each_detail">{{ report.reply}}</div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            {% else %}
                <div class="no-list">
                    신고한 내역이 없습니다
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
